<button
  type="button"
  class="group relative w-full p-4 bg-card/30 hover:bg-card/60 text-left rounded-xl border border-border/50 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 ring-offset-background"
  [attr.aria-label]="hasHouse() ? 'Switch house: ' + houseName() : 'Select house'"
  (click)="onOpenHouseDialog()"
>
  <!-- Loading State -->
  @if (isLoading()) {
  <div class="flex items-center gap-3">
    <div class="w-10 h-10 rounded-lg bg-muted animate-pulse"></div>
    <div class="flex-1 space-y-2">
      <div class="h-4 bg-muted rounded animate-pulse w-3/4"></div>
      <div class="h-3 bg-muted rounded animate-pulse w-1/2"></div>
    </div>
    <div class="w-5 h-5 bg-muted rounded animate-pulse"></div>
  </div>
  } @else {

  <!-- House Content -->
  <div class="flex items-center gap-3">
    <!-- House Icon/Avatar -->
    <div class="relative">
      <div
        class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors duration-200"
      >
        @if (hasHouse()) {
        <hia-icon name="lucideHouse" [size]="20" class="text-primary" />
        } @else {
        <hia-icon name="lucidePlus" [size]="20" class="text-muted-foreground" />
        }
      </div>

      <!-- Status Indicator -->
      @if (hasHouse()) {
      <div
        class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 border-2 border-background rounded-full"
      ></div>
      }
    </div>

    <!-- House Information -->
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2">
        <h3
          class="font-semibold text-sm text-foreground truncate group-hover:text-primary transition-colors duration-200"
        >
          {{ houseName() }}
        </h3>
        @if (!hasHouse()) {
        <span
          class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground"
        >
          Required
        </span>
        }
      </div>

      @if (hasHouse()) {
      <div class="flex items-center gap-3 mt-1">
        <span
          class="inline-flex items-center gap-1 rounded-md bg-accent/50 px-1.5 py-0.5 text-[10px] text-muted-foreground"
        >
          <hia-icon name="lucideBox" [size]="12" /> {{ itemCount() }}
        </span>
        <span
          class="inline-flex items-center gap-1 rounded-md bg-accent/50 px-1.5 py-0.5 text-[10px] text-muted-foreground"
        >
          <hia-icon name="lucideWarehouse" [size]="12" /> {{ roomCount() }}
        </span>
      </div>

      } @else {
      <p class="text-xs text-muted-foreground mt-1">Click to select your house</p>
      }
    </div>

    <!-- Action Indicator -->
    <div class="flex items-center">
      <div
        class="w-6 h-6 rounded-full bg-accent/50 group-hover:bg-accent flex items-center justify-center transition-colors duration-200"
      >
        <hia-icon
          name="lucideChevronRight"
          [size]="14"
          class="text-muted-foreground group-hover:text-foreground transition-colors duration-200"
        />
      </div>
    </div>
  </div>

  <!-- Hover Effect -->
  <div
    class="absolute inset-0 rounded-xl bg-linear-to-r from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none"
  ></div>
  }
</button>
