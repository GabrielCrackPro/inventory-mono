<div class="h-full flex flex-col py-4 px-6">
  <!-- Breadcrumb Navigation -->
  <div class="mb-4 flex items-center justify-between">
    <z-breadcrumb>
      <z-breadcrumb-item routerLink="/dashboard">Dashboard</z-breadcrumb-item>
      @if (currentRoom()) {
      <z-breadcrumb-item routerLink="/dashboard/rooms">Rooms</z-breadcrumb-item>
      <z-breadcrumb-item>{{ currentRoom()!.name }}</z-breadcrumb-item>
      } @else {
      <z-breadcrumb-item>Items</z-breadcrumb-item>
      }
    </z-breadcrumb>

    @if (currentRoom()) {
    <div class="flex items-center gap-2">
      <span
        class="inline-flex items-center gap-1.5 px-3 py-1 text-xs font-medium bg-primary/10 text-primary rounded-full"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="12"
          height="12"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />
        </svg>
        Filtered by room
      </span>
    </div>
    }
  </div>

  @if (items().length !== 0) {

  <hia-items-list-header
    [itemsCount]="items().length"
    [selectedCount]="selectedItems().length"
    [selectMode]="selectMode()"
    [viewOptions]="viewOptions()"
    [defaultView]="defaultView()"
    [tableActions]="tableActions()"
    [showSettings]="viewMode() === 'table'"
    (toggleSelectMode)="toggleSelectMode()"
    (changeViewMode)="changeViewMode($event)"
    (settingsClick)="onSettingsClick()"
  />
  }
  <div class="flex-1 h-full min-h-0 overflow-auto">
    @if (loading()) {
    <hia-item-list-page-skeleton [variant]="viewMode()" />
    } @else if (items().length === 0) {
    <div class="h-full flex items-center justify-center p-6">
      <z-card class="w-full max-w-5xl mx-auto p-12 min-h-96 flex items-center justify-center">
        <div class="flex flex-col gap-3">
          <z-empty zIcon="lucideBox" [zIconSize]="40" zDescription="No items yet" />
          @if (canCreateItem()) {
          <z-button [label]="'Add Item'" iconName="lucidePlus" routerLink="items/new" />
          }
        </div>
      </z-card>
    </div>
    } @else {
    <div class="h-full">
      @if (viewMode() === 'grid') {
      <div class="h-full animate-fade-in-up">
        <hia-items-grid-view
          [items]="items()"
          [selectedIds]="selectedIds()"
          [selectMode]="selectMode()"
          (toggleSelect)="onToggleSelect($event)"
          (toggleSelectAll)="onToggleSelectAll($event)"
        />
      </div>
      } @else {
      <div class="h-full animate-fade-in-up">
        <hia-items-table-view
          [items]="itemsSorted()"
          [columns]="columns()"
          [sortKey]="sortKey()"
          [sortDir]="sortDir()"
          [selectedIds]="selectedIds()"
          (toggleSelect)="onToggleSelect($event)"
          (toggleSelectAll)="onToggleSelectAll($event)"
          (onSort)="setSort($event)"
        />
      </div>
      }
    </div>
    }
  </div>
</div>
