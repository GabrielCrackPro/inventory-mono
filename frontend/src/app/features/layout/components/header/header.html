<z-header [zDetectScroll]="true" [zHeight]="64">
  <nav class="w-full h-full" aria-label="Main navigation">
    <div class="max-w-[1920px] mx-auto px-4 sm:px-6 lg:px-8 h-full">
      <div class="flex items-center h-full gap-4">
        <!-- Left section: Brand & House Switcher -->
        <div class="flex items-center gap-3 sm:gap-4 shrink-0">
          <!-- Brand -->
          <a
            href="/"
            class="shrink-0 rounded-md transition-all duration-200 ease-out hover:scale-105 hover:opacity-90 active:scale-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
            aria-label="Home"
          >
            <hia-logo [size]="36" variant="compact" />
          </a>

          <!-- House switcher - Desktop -->
          <div
            class="hidden sm:flex items-center pl-3 ml-2 border-l border-border/60 transition-colors duration-200"
          >
            <hia-house-switcher (onClick)="onOpenHouseDialog()" />
          </div>

          <!-- House switcher - Mobile (Icon only) -->
          <button
            class="sm:hidden flex items-center justify-center w-9 h-9 rounded-md text-muted-foreground hover:text-foreground hover:bg-accent active:scale-95 transition-all duration-200 ease-out focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1"
            (click)="onOpenHouseDialog()"
            aria-label="Switch house"
            type="button"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="transition-transform duration-200"
            >
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
              <polyline points="9 22 9 12 15 12 15 22" />
            </svg>
          </button>
        </div>

        <!-- Center: Search Bar -->
        <div class="hidden md:flex flex-1 items-center justify-center">
          <div class="w-full max-w-2xl">
            <hia-quick-search (onSearch)="handleSearch($event)" />
          </div>
        </div>

        <!-- Right section: Theme & Profile -->
        <div class="flex items-center shrink-0 m-auto">
          <!-- Mobile Search Icon -->
          <button
            class="md:hidden flex items-center justify-center w-9 h-9 rounded-md text-muted-foreground hover:text-foreground hover:bg-accent active:scale-95 transition-all duration-200 ease-out focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 mr-3"
            (click)="openMobileSearch()"
            aria-label="Open search"
            type="button"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="11" cy="11" r="8" />
              <path d="m21 21-4.3-4.3" />
            </svg>
          </button>

          <hia-theme-switcher />
          <hia-profile-menu
            [profile]="userProfile()"
            (switchHouse)="onOpenHouseDialog()"
            (logout)="logout()"
          />
        </div>
      </div>
    </div>
  </nav>
</z-header>
