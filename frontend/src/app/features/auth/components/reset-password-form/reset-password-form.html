<form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
  <!-- Password Field -->
  <z-form-field>
    <label z-form-label>New Password</label>
    <z-form-control>
      <input
        z-input
        type="password"
        placeholder="Create a strong password"
        formControlName="password"
        [zStatus]="passwordValid ? null : 'error'"
        autocomplete="new-password"
        (focus)="onPasswordFocus()"
        (blur)="onPasswordBlur()"
      />
    </z-form-control>

    @if (showPasswordRequirements()) {
    <div class="mt-3 p-4 bg-muted/30 rounded-lg border border-border/50 backdrop-blur-sm">
      <p class="text-xs font-semibold text-muted-foreground mb-3 flex items-center">
        <hia-icon name="lucideInfo" [size]="14" class="mr-2" /> Password requirements:
      </p>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs">
        <div class="flex items-center space-x-2">
          <hia-icon [name]="passwordRequirements.minLength ? 'lucideCircleCheck' : 'lucidePlus'" [size]="14"
            [class]="passwordRequirements.minLength ? 'text-green-500' : 'text-muted-foreground'" />
          <span [class]="passwordRequirements.minLength ? 'text-green-600 font-medium' : 'text-muted-foreground'">8+
            characters</span>
        </div>
        <div class="flex items-center space-x-2">
          <hia-icon [name]="passwordRequirements.lowercase ? 'lucideCircleCheck' : 'lucidePlus'" [size]="14"
            [class]="passwordRequirements.lowercase ? 'text-green-500' : 'text-muted-foreground'" />
          <span [class]="passwordRequirements.lowercase ? 'text-green-600 font-medium' : 'text-muted-foreground'">Lowercase
            letter</span>
        </div>
        <div class="flex items-center space-x-2">
          <hia-icon [name]="passwordRequirements.uppercase ? 'lucideCircleCheck' : 'lucidePlus'" [size]="14"
            [class]="passwordRequirements.uppercase ? 'text-green-500' : 'text-muted-foreground'" />
          <span [class]="passwordRequirements.uppercase ? 'text-green-600 font-medium' : 'text-muted-foreground'">Uppercase
            letter</span>
        </div>
        <div class="flex items-center space-x-2">
          <hia-icon [name]="passwordRequirements.number ? 'lucideCircleCheck' : 'lucidePlus'" [size]="14"
            [class]="passwordRequirements.number ? 'text-green-500' : 'text-muted-foreground'" />
          <span [class]="passwordRequirements.number ? 'text-green-600 font-medium' : 'text-muted-foreground'">Number</span>
        </div>
        <div class="flex items-center space-x-2">
          <hia-icon [name]="passwordRequirements.specialChar ? 'lucideCircleCheck' : 'lucidePlus'" [size]="14"
            [class]="passwordRequirements.specialChar ? 'text-green-500' : 'text-muted-foreground'" />
          <span [class]="passwordRequirements.specialChar ? 'text-green-600 font-medium' : 'text-muted-foreground'">Special
            character</span>
        </div>
        <div class="flex items-center space-x-2">
          <hia-icon [name]="passwordRequirements.noSpaces ? 'lucideCircleCheck' : 'lucidePlus'" [size]="14"
            [class]="passwordRequirements.noSpaces ? 'text-green-500' : 'text-muted-foreground'" />
          <span [class]="passwordRequirements.noSpaces ? 'text-green-600 font-medium' : 'text-muted-foreground'">No
            spaces</span>
        </div>
      </div>
    </div>
    } @if (!passwordValid) {
    <z-form-message zType="error">{{ passwordErrorMessage }}</z-form-message>
    }
  </z-form-field>

  <!-- Confirm Password Field -->
  <z-form-field>
    <label z-form-label>Confirm Password</label>
    <z-form-control>
      <input
        z-input
        type="password"
        placeholder="Confirm your password"
        formControlName="confirmPassword"
        [zStatus]="confirmPasswordValid ? null : 'error'"
        autocomplete="new-password"
      />
    </z-form-control>
    @if (!confirmPasswordValid) {
    <z-form-message zType="error">{{ confirmPasswordErrorMessage }}</z-form-message>
    }
  </z-form-field>

  <z-button type="submit" label="Reset Password" iconName="lucideLock" iconPosition="right"
    [zLoading]="isLoading()" [disabled]="disabled" class="w-full" />
</form>
