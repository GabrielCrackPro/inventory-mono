<button
  type="button"
  class="group relative min-w-[220px] max-w-[280px] p-3 bg-card/50 hover:bg-card text-left rounded-lg border border-border/60 hover:border-primary/30 transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 hover:shadow-md"
  [attr.aria-label]="hasHouse() ? 'Switch house: ' + houseName() : 'Select house'"
  (click)="onOpenHouseDialog()"
>
  <!-- Loading State -->
  @if (isLoading()) {
  <div class="flex items-center gap-3">
    <div class="w-10 h-10 rounded-lg bg-muted animate-pulse"></div>
    <div class="flex-1 space-y-2">
      <div class="h-4 bg-muted rounded animate-pulse w-3/4"></div>
      <div class="h-3 bg-muted rounded animate-pulse w-1/2"></div>
    </div>
    <div class="w-5 h-5 bg-muted rounded animate-pulse"></div>
  </div>
  } @else {

  <!-- House Content -->
  <div class="flex items-center gap-3">
    <!-- House Icon -->
    <div class="relative shrink-0">
      <div
        class="w-10 h-10 rounded-lg flex items-center justify-center transition-all duration-200"
        [ngClass]="{
          'bg-primary/15': hasHouse(),
          'bg-muted/50': !hasHouse()
        }"
      >
        @if (hasHouse()) {
        <hia-icon [name]="commonIcons['house']" [size]="20" class="text-primary" />
        } @else {
        <hia-icon [name]="commonIcons['add']" [size]="20" class="text-muted-foreground" />
        }
      </div>

      <!-- Status Indicator -->
      @if (hasHouse()) {
      <div
        class="absolute -top-0.5 -right-0.5 w-3 h-3 bg-emerald-500 border-2 border-background rounded-full"
        title="Active house"
      ></div>
      }
    </div>

    <!-- House Information -->
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2 mb-1">
        <h3 class="font-semibold text-sm text-foreground truncate">
          {{ houseName() }}
        </h3>
        @if (!hasHouse()) {
        <span
          class="inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-amber-500/10 text-amber-600 dark:text-amber-400"
        >
          Required
        </span>
        }
      </div>

      @if (hasHouse()) {
      <div class="flex items-center gap-2">
        <span
          class="inline-flex items-center gap-1 rounded bg-secondary/50 px-1.5 py-0.5 text-[10px] font-medium text-muted-foreground"
          title="Total items"
        >
          <hia-icon [name]="commonIcons['item']" [size]="11" />
          {{ itemCount() }}
        </span>
        <span
          class="inline-flex items-center gap-1 rounded bg-secondary/50 px-1.5 py-0.5 text-[10px] font-medium text-muted-foreground"
          title="Total rooms"
        >
          <hia-icon [name]="commonIcons['room']" [size]="11" />
          {{ roomCount() }}
        </span>
      </div>
      } @else {
      <p class="text-xs text-muted-foreground">Click to select</p>
      }
    </div>

    <!-- Action Indicator -->
    <div class="flex items-center shrink-0">
      <div
        class="w-6 h-6 rounded-lg bg-accent/30 group-hover:bg-accent flex items-center justify-center transition-colors duration-200"
      >
        <hia-icon
          [name]="commonIcons['right']"
          [size]="13"
          class="text-muted-foreground group-hover:text-foreground transition-colors duration-200"
        />
      </div>
    </div>
  </div>

  <!-- Subtle Hover Effect -->
  <div
    class="absolute inset-0 rounded-lg bg-linear-to-r from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none"
  ></div>
  }
</button>
